---
interface Props {
  title?: string;
  description?: string;
  recipientEmail?: string;
}

const {
  title = "Kontakt Os",
  description = "Har du et projekt i tankerne? Udfyld formularen herunder, og vi vender tilbage til dig hurtigst muligt.",
  recipientEmail = "luu@rnsapps.dk",
} = Astro.props;
---

<div class="w-full">
  <div class="text-center mb-12">
    <h2 class="text-5xl font-extrabold tracking-tighter text-white">{title}</h2>
    <p class="text-slate-400 mt-2 max-w-2xl mx-auto">
      {description}
    </p>
  </div>

  <div class="max-w-2xl mx-auto">
    <form
      id="contact-component-form"
      class="bg-black bg-opacity-10 backdrop-blur-xl shadow-lg shadow-orange-500/30 rounded-lg p-8"
      data-recipient={recipientEmail}
    >
      <div class="mb-4">
        <label for="comp-name" class="block text-slate-300 mb-2">Navn</label>
        <input
          type="text"
          id="comp-name"
          name="name"
          class="w-full bg-[#3b3b3b] border border-[#FF6941] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F2865F]"
          required
        />
      </div>

      <div class="mb-4">
        <label for="comp-email" class="block text-slate-300 mb-2">Email</label>
        <input
          type="email"
          id="comp-email"
          name="email"
          class="w-full bg-[#3b3b3b] border border-[#FF6941] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F2865F]"
          required
        />
      </div>

      <div class="mb-4">
        <label for="comp-phone" class="block text-slate-300 mb-2"
          >Telefonnummer</label
        >
        <input
          type="tel"
          id="comp-phone"
          name="telefon"
          class="w-full bg-[#3b3b3b] border border-[#FF6941] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F2865F]"
        />
      </div>

      <div class="mb-6">
        <label for="comp-message" class="block text-slate-300 mb-2"
          >Besked</label
        >
        <textarea
          id="comp-message"
          name="message"
          rows="4"
          class="w-full bg-[#3b3b3b] border border-[#FF6941] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F2865F]"
          required></textarea>
      </div>

      <div class="text-center">
        <button
          type="submit"
          class="bg-[#FF6941] hover:bg-[#F2865F] text-white font-bold py-3 px-8 rounded-full transition-colors"
        >
          Send Besked
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  const form = document.getElementById("contact-component-form");

  if (form) {
    form.addEventListener("submit", function (event) {
      event.preventDefault();

      const formElement = event.target as HTMLFormElement;
      const recipient = formElement.dataset.recipient;

      // Get values using unique IDs to avoid conflicts with other forms
      const name = (document.getElementById("comp-name") as HTMLInputElement)
        .value;
      const email = (document.getElementById("comp-email") as HTMLInputElement)
        .value;
      const telefon = (
        document.getElementById("comp-phone") as HTMLInputElement
      ).value;
      const message = (
        document.getElementById("comp-message") as HTMLTextAreaElement
      ).value;

      const subject = `Kontakt fra ${name}`;

      const body = `
Navn: ${name}
Email: ${email}
Telefon: ${telefon}

Besked:
${message}
      `;

      window.location.href = `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    });
  }
</script>
